
<script>
function genPredictions() {
    
  var gmat = document.getElementById("gmat").value;
  var gpa = document.getElementById("gpa").value;
  var age = document.getElementById("age").value;
  var nameBrandSchool = document.getElementById("school-i-went-to").value;
  var major = document.getElementById("major").value;
  var urm = document.getElementById("race").value;
  var gender = document.getElementById("gender").value;
  var aspirationalSchool = document.getElementById("school-i-wanna-go-to").value;
  var postbody = {"gpa":gpa,
                  "gmat":gmat,
                  "major":major,
                  "race":urm,
                  "gender":gender,
                  "school":aspirationalSchool,
                  "university":nameBrandSchool}

  console.log([age,gpa,gmat,nameBrandSchool,major,urm,gender])
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      
        var responseObject = JSON.parse(this.responseText);
        var chance = responseObject.body.chance.toFixed(2)
        var school_sel = responseObject.body.school

		console.log('chance: '+chance)
        console.log('school: '+school_sel)
        document.getElementById("chance-result").innerHTML = "Chances of getting into "+school_sel + "\n" + chance;
        //document.getElementById("author-result").innerHTML = "- " + author;
    }
  };
  xhttp.open("POST", "https://jcp.pythonanywhere.com/api/v1");
  xhttp.setRequestHeader("Content-Type","application/json")

  xhttp.send(JSON.stringify(postbody));
}
    
</script>


